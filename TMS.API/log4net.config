<configuration>

  <!-- 1. 添加log4net的节点声明配置代码-->

  <configSections>

    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />

  </configSections>

  <!--2. log4net的核心配置代码-->

  <log4net>

    <!--把日志信息输出到以日期命名的文件里-->

    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">

      <!--文件夹的位置-->

      <file value="F://实训二//实训二项目//项目框架//TMS//TMS.API//bin//Debug//net5.0//Log4net//log" />
      
      <!--是否追加到文件-->
      
      <appendToFile value="true" />

      <!--记录日志写入文件时，不锁定文本文件，防止多线程时不能写Log，官方说线程非安全-->
      
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      
      <!--最多产生的日志文件数，超过则只保留最新的n+1个-->
      
      <maxSizeRollBackups value="1" />
      
      <!--每个文件的大小，只在混合方式与文件大小方式下使用，超出大小后在所有文件名后自动增加正整数重新命名，数字最大的最早写入，没带数字最晚写入-->
      <maximumFileSize value="256MB" />
      
      <!--是否只写到一个文件中-->
      
      <staticLogFileName value="false"/>
      
      <!--按照何种方式产生多个日志文件(日期[Date]，文件大小[Size]，混合[Composite])-->
      
      <rollingStyle value="Composite" />
      
      <!--是否保存日志文件的扩展名-->
      
      <preserveLogFileNameExtension value="true" />
      
      <!--按日期产生文件夹，文件名固定。注意&quot; 的位置-->
      
      <datePattern value="yyyy-MM-dd/&quot;SysInfo.log&quot;" />

      <!--动态生成文件名-->

      <param name="StaticLogFileName" value="false" />

      <!--以日期命名-->

      <param name="DatePattern" value="yyyyMMdd" log="" />

      <rollingStyle value="Date" />

      <!--日志在日志文件中的布局方式-->

      <layout type="log4net.Layout.PatternLayout">

        <conversionPattern value="%newline %n记录时间：%date %n线程ID:[%thread] %n日志级别： %-5level %n请求路径：%logger property: [%property{NDC}] - %n错误描述：%message%newline %n"/>

      </layout>

      <!--使用最小锁定模型（minimal locking model），以允许多个进程可以写入同一个文件 -->

      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />

    </appender>

    <root>

      <level value="ALL"></level>

      <appender-ref ref="RollingFileAppender"></appender-ref>

    </root>

  </log4net>

  <startup>

    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6" />

  </startup>

</configuration>